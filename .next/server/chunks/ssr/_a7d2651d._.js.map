{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///Users/hasanalmahadi/WebProject/medimeet/actions/onboarding.js"],"sourcesContent":["\"use server\";\n\nimport { db } from \"@/lib/prisma\";\nimport { auth } from \"@clerk/nextjs/server\";\nimport { revalidatePath } from \"next/cache\";\n\n/**\n * Sets the user's role and related information\n */\nexport async function setUserRole(formData) {\n  const { userId } = await auth();\n\n  if (!userId) {\n    throw new Error(\"Unauthorized\");\n  }\n\n  // Find user in our database\n  const user = await db.user.findUnique({\n    where: { clerkUserId: userId },\n  });\n\n  if (!user) throw new Error(\"User not found in database\");\n\n  const role = formData.get(\"role\");\n\n  if (!role || ![\"PATIENT\", \"DOCTOR\"].includes(role)) {\n    throw new Error(\"Invalid role selection\");\n  }\n\n  try {\n    // For patient role - simple update\n    if (role === \"PATIENT\") {\n      await db.user.update({\n        where: {\n          clerkUserId: userId,\n        },\n        data: {\n          role: \"PATIENT\",\n        },\n      });\n\n      revalidatePath(\"/\");\n      return { success: true, redirect: \"/doctors\" };\n    }\n\n    // For doctor role - need additional information\n    if (role === \"DOCTOR\") {\n      const specialty = formData.get(\"specialty\");\n      const experience = parseInt(formData.get(\"experience\"), 10);\n      const credentialUrl = formData.get(\"credentialUrl\");\n      const description = formData.get(\"description\");\n\n      // Validate inputs\n      if (!specialty || !experience || !credentialUrl || !description) {\n        throw new Error(\"All fields are required\");\n      }\n\n      await db.user.update({\n        where: {\n          clerkUserId: userId,\n        },\n        data: {\n          role: \"DOCTOR\",\n          specialty,\n          experience,\n          credentialUrl,\n          description,\n          verificationStatus: \"PENDING\",\n        },\n      });\n\n      revalidatePath(\"/\");\n      return { success: true, redirect: \"/doctor/verification\" };\n    }\n  } catch (error) {\n    console.error(\"Failed to set user role:\", error);\n    throw new Error(`Failed to update user profile: ${error.message}`);\n  }\n}\n\n/**\n * Gets the current user's complete profile information\n */\nexport async function getCurrentUser() {\n  const { userId } = await auth();\n\n  if (!userId) {\n    return null;\n  }\n\n  try {\n    const user = await db.user.findUnique({\n      where: {\n        clerkUserId: userId,\n      },\n    });\n\n    return user;\n  } catch (error) {\n    console.error(\"Failed to get user information:\", error);\n    return null;\n  }\n}\n"],"names":[],"mappings":";;;;;;AAEA;AACA;AACA;;;;;;;AAKO,eAAe,YAAY,QAAQ;IACxC,MAAM,EAAE,MAAM,EAAE,GAAG,MAAM,CAAA,GAAA,mLAAA,CAAA,OAAI,AAAD;IAE5B,IAAI,CAAC,QAAQ;QACX,MAAM,IAAI,MAAM;IAClB;IAEA,4BAA4B;IAC5B,MAAM,OAAO,MAAM,6GAAA,CAAA,KAAE,CAAC,IAAI,CAAC,UAAU,CAAC;QACpC,OAAO;YAAE,aAAa;QAAO;IAC/B;IAEA,IAAI,CAAC,MAAM,MAAM,IAAI,MAAM;IAE3B,MAAM,OAAO,SAAS,GAAG,CAAC;IAE1B,IAAI,CAAC,QAAQ,CAAC;QAAC;QAAW;KAAS,CAAC,QAAQ,CAAC,OAAO;QAClD,MAAM,IAAI,MAAM;IAClB;IAEA,IAAI;QACF,mCAAmC;QACnC,IAAI,SAAS,WAAW;YACtB,MAAM,6GAAA,CAAA,KAAE,CAAC,IAAI,CAAC,MAAM,CAAC;gBACnB,OAAO;oBACL,aAAa;gBACf;gBACA,MAAM;oBACJ,MAAM;gBACR;YACF;YAEA,CAAA,GAAA,6HAAA,CAAA,iBAAc,AAAD,EAAE;YACf,OAAO;gBAAE,SAAS;gBAAM,UAAU;YAAW;QAC/C;QAEA,gDAAgD;QAChD,IAAI,SAAS,UAAU;YACrB,MAAM,YAAY,SAAS,GAAG,CAAC;YAC/B,MAAM,aAAa,SAAS,SAAS,GAAG,CAAC,eAAe;YACxD,MAAM,gBAAgB,SAAS,GAAG,CAAC;YACnC,MAAM,cAAc,SAAS,GAAG,CAAC;YAEjC,kBAAkB;YAClB,IAAI,CAAC,aAAa,CAAC,cAAc,CAAC,iBAAiB,CAAC,aAAa;gBAC/D,MAAM,IAAI,MAAM;YAClB;YAEA,MAAM,6GAAA,CAAA,KAAE,CAAC,IAAI,CAAC,MAAM,CAAC;gBACnB,OAAO;oBACL,aAAa;gBACf;gBACA,MAAM;oBACJ,MAAM;oBACN;oBACA;oBACA;oBACA;oBACA,oBAAoB;gBACtB;YACF;YAEA,CAAA,GAAA,6HAAA,CAAA,iBAAc,AAAD,EAAE;YACf,OAAO;gBAAE,SAAS;gBAAM,UAAU;YAAuB;QAC3D;IACF,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,4BAA4B;QAC1C,MAAM,IAAI,MAAM,CAAC,+BAA+B,EAAE,MAAM,OAAO,EAAE;IACnE;AACF;AAKO,eAAe;IACpB,MAAM,EAAE,MAAM,EAAE,GAAG,MAAM,CAAA,GAAA,mLAAA,CAAA,OAAI,AAAD;IAE5B,IAAI,CAAC,QAAQ;QACX,OAAO;IACT;IAEA,IAAI;QACF,MAAM,OAAO,MAAM,6GAAA,CAAA,KAAE,CAAC,IAAI,CAAC,UAAU,CAAC;YACpC,OAAO;gBACL,aAAa;YACf;QACF;QAEA,OAAO;IACT,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,mCAAmC;QACjD,OAAO;IACT;AACF;;;IA7FsB;IA0EA;;AA1EA,+OAAA;AA0EA,+OAAA","debugId":null}},
    {"offset": {"line": 146, "column": 0}, "map": {"version":3,"sources":["file:///Users/hasanalmahadi/WebProject/medimeet/components/ui/card.jsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Card({\n  className,\n  ...props\n}) {\n  return (\n    <div\n      data-slot=\"card\"\n      className={cn(\n        \"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm\",\n        className\n      )}\n      {...props} />\n  );\n}\n\nfunction CardHeader({\n  className,\n  ...props\n}) {\n  return (\n    <div\n      data-slot=\"card-header\"\n      className={cn(\n        \"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6\",\n        className\n      )}\n      {...props} />\n  );\n}\n\nfunction CardTitle({\n  className,\n  ...props\n}) {\n  return (\n    <div\n      data-slot=\"card-title\"\n      className={cn(\"leading-none font-semibold\", className)}\n      {...props} />\n  );\n}\n\nfunction CardDescription({\n  className,\n  ...props\n}) {\n  return (\n    <div\n      data-slot=\"card-description\"\n      className={cn(\"text-muted-foreground text-sm\", className)}\n      {...props} />\n  );\n}\n\nfunction CardAction({\n  className,\n  ...props\n}) {\n  return (\n    <div\n      data-slot=\"card-action\"\n      className={cn(\n        \"col-start-2 row-span-2 row-start-1 self-start justify-self-end\",\n        className\n      )}\n      {...props} />\n  );\n}\n\nfunction CardContent({\n  className,\n  ...props\n}) {\n  return (<div data-slot=\"card-content\" className={cn(\"px-6\", className)} {...props} />);\n}\n\nfunction CardFooter({\n  className,\n  ...props\n}) {\n  return (\n    <div\n      data-slot=\"card-footer\"\n      className={cn(\"flex items-center px-6 [.border-t]:pt-6\", className)}\n      {...props} />\n  );\n}\n\nexport {\n  Card,\n  CardHeader,\n  CardFooter,\n  CardTitle,\n  CardAction,\n  CardDescription,\n  CardContent,\n}\n"],"names":[],"mappings":";;;;;;;;;;AAAA;AAEA;;;;AAEA,SAAS,KAAK,EACZ,SAAS,EACT,GAAG,OACJ;IACC,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,CAAA,GAAA,4GAAA,CAAA,KAAE,AAAD,EACV,qFACA;QAED,GAAG,KAAK;;;;;;AAEf;AAEA,SAAS,WAAW,EAClB,SAAS,EACT,GAAG,OACJ;IACC,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,CAAA,GAAA,4GAAA,CAAA,KAAE,AAAD,EACV,8JACA;QAED,GAAG,KAAK;;;;;;AAEf;AAEA,SAAS,UAAU,EACjB,SAAS,EACT,GAAG,OACJ;IACC,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,CAAA,GAAA,4GAAA,CAAA,KAAE,AAAD,EAAE,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAEf;AAEA,SAAS,gBAAgB,EACvB,SAAS,EACT,GAAG,OACJ;IACC,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,CAAA,GAAA,4GAAA,CAAA,KAAE,AAAD,EAAE,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAEf;AAEA,SAAS,WAAW,EAClB,SAAS,EACT,GAAG,OACJ;IACC,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,CAAA,GAAA,4GAAA,CAAA,KAAE,AAAD,EACV,kEACA;QAED,GAAG,KAAK;;;;;;AAEf;AAEA,SAAS,YAAY,EACnB,SAAS,EACT,GAAG,OACJ;IACC,qBAAQ,8OAAC;QAAI,aAAU;QAAe,WAAW,CAAA,GAAA,4GAAA,CAAA,KAAE,AAAD,EAAE,QAAQ;QAAa,GAAG,KAAK;;;;;;AACnF;AAEA,SAAS,WAAW,EAClB,SAAS,EACT,GAAG,OACJ;IACC,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,CAAA,GAAA,4GAAA,CAAA,KAAE,AAAD,EAAE,2CAA2C;QACxD,GAAG,KAAK;;;;;;AAEf","debugId":null}},
    {"offset": {"line": 245, "column": 0}, "map": {"version":3,"sources":["file:///Users/hasanalmahadi/WebProject/medimeet/app/%28main%29/doctor/verification/page.jsx"],"sourcesContent":["import { ClipboardCheck, AlertCircle, XCircle } from \"lucide-react\";\nimport {\n  Card,\n  CardContent,\n  CardDescription,\n  CardHeader,\n  CardTitle,\n} from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport Link from \"next/link\";\nimport { getCurrentUser } from \"@/actions/onboarding\";\nimport { redirect } from \"next/navigation\";\n\nexport default async function VerificationPage() {\n  // Get complete user profile\n  const user = await getCurrentUser();\n\n  // If already verified, redirect to dashboard\n  if (user?.verificationStatus === \"VERIFIED\") {\n    redirect(\"/doctor\");\n  }\n\n  const isRejected = user?.verificationStatus === \"REJECTED\";\n\n  return (\n    <div className=\"container mx-auto px-4 py-12\">\n      <div className=\"max-w-2xl mx-auto\">\n        <Card className=\"border-emerald-900/20\">\n          <CardHeader className=\"text-center\">\n            <div\n              className={`mx-auto p-4 ${\n                isRejected ? \"bg-red-900/20\" : \"bg-amber-900/20\"\n              } rounded-full mb-4 w-fit`}\n            >\n              {isRejected ? (\n                <XCircle className=\"h-8 w-8 text-red-400\" />\n              ) : (\n                <ClipboardCheck className=\"h-8 w-8 text-amber-400\" />\n              )}\n            </div>\n            <CardTitle className=\"text-2xl font-bold text-white\">\n              {isRejected\n                ? \"Verification Declined\"\n                : \"Verification in Progress\"}\n            </CardTitle>\n            <CardDescription className=\"text-lg\">\n              {isRejected\n                ? \"Unfortunately, your application needs revision\"\n                : \"Thank you for submitting your information\"}\n            </CardDescription>\n          </CardHeader>\n          <CardContent className=\"text-center\">\n            {isRejected ? (\n              <div className=\"bg-red-900/10 border border-red-900/20 rounded-lg p-4 mb-6 flex items-start\">\n                <AlertCircle className=\"h-5 w-5 text-red-400 mr-3 mt-0.5 flex-shrink-0\" />\n                <div className=\"text-muted-foreground text-left\">\n                  <p className=\"mb-2\">\n                    Our administrative team has reviewed your application and\n                    found that it doesn&apos;t meet our current requirements.\n                    Common reasons for rejection include:\n                  </p>\n                  <ul className=\"list-disc pl-5 space-y-1 mb-3\">\n                    <li>Insufficient or unclear credential documentation</li>\n                    <li>Professional experience requirements not met</li>\n                    <li>Incomplete or vague service description</li>\n                  </ul>\n                  <p>\n                    You can update your application with more information and\n                    resubmit for review.\n                  </p>\n                </div>\n              </div>\n            ) : (\n              <div className=\"bg-amber-900/10 border border-amber-900/20 rounded-lg p-4 mb-6 flex items-start\">\n                <AlertCircle className=\"h-5 w-5 text-amber-400 mr-3 mt-0.5 flex-shrink-0\" />\n                <p className=\"text-muted-foreground text-left\">\n                  Your profile is currently under review by our administrative\n                  team. This process typically takes 1-2 business days.\n                  You&apos;ll receive an email notification once your account is\n                  verified.\n                </p>\n              </div>\n            )}\n\n            <p className=\"text-muted-foreground mb-6\">\n              {isRejected\n                ? \"You can update your doctor profile and resubmit for verification.\"\n                : \"While you wait, you can familiarize yourself with our platform or reach out to our support team if you have any questions.\"}\n            </p>\n\n            <div className=\"flex flex-col sm:flex-row gap-4 justify-center\">\n              {isRejected ? (\n                <>\n                  <Button\n                    asChild\n                    variant=\"outline\"\n                    className=\"border-emerald-900/30\"\n                  >\n                    <Link href=\"/\">Return to Home</Link>\n                  </Button>\n                  <Button\n                    asChild\n                    className=\"bg-emerald-600 hover:bg-emerald-700\"\n                  >\n                    <Link href=\"/doctor/update-profile\">Update Profile</Link>\n                  </Button>\n                </>\n              ) : (\n                <>\n                  <Button\n                    asChild\n                    variant=\"outline\"\n                    className=\"border-emerald-900/30\"\n                  >\n                    <Link href=\"/\">Return to Home</Link>\n                  </Button>\n                  <Button\n                    asChild\n                    className=\"bg-emerald-600 hover:bg-emerald-700\"\n                  >\n                    <Link href=\"/contact-support\">Contact Support</Link>\n                  </Button>\n                </>\n              )}\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;AAAA;AAAA;AAAA;AACA;AAOA;AACA;AACA;AACA;AAAA;;;;;;;;AAEe,eAAe;IAC5B,4BAA4B;IAC5B,MAAM,OAAO,MAAM,CAAA,GAAA,qHAAA,CAAA,iBAAc,AAAD;IAEhC,6CAA6C;IAC7C,IAAI,MAAM,uBAAuB,YAAY;QAC3C,CAAA,GAAA,qLAAA,CAAA,WAAQ,AAAD,EAAE;IACX;IAEA,MAAM,aAAa,MAAM,uBAAuB;IAEhD,qBACE,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC;YAAI,WAAU;sBACb,cAAA,8OAAC,yHAAA,CAAA,OAAI;gBAAC,WAAU;;kCACd,8OAAC,yHAAA,CAAA,aAAU;wBAAC,WAAU;;0CACpB,8OAAC;gCACC,WAAW,CAAC,YAAY,EACtB,aAAa,kBAAkB,kBAChC,wBAAwB,CAAC;0CAEzB,2BACC,8OAAC,4MAAA,CAAA,UAAO;oCAAC,WAAU;;;;;yDAEnB,8OAAC,0NAAA,CAAA,iBAAc;oCAAC,WAAU;;;;;;;;;;;0CAG9B,8OAAC,yHAAA,CAAA,YAAS;gCAAC,WAAU;0CAClB,aACG,0BACA;;;;;;0CAEN,8OAAC,yHAAA,CAAA,kBAAe;gCAAC,WAAU;0CACxB,aACG,mDACA;;;;;;;;;;;;kCAGR,8OAAC,yHAAA,CAAA,cAAW;wBAAC,WAAU;;4BACpB,2BACC,8OAAC;gCAAI,WAAU;;kDACb,8OAAC,oNAAA,CAAA,cAAW;wCAAC,WAAU;;;;;;kDACvB,8OAAC;wCAAI,WAAU;;0DACb,8OAAC;gDAAE,WAAU;0DAAO;;;;;;0DAKpB,8OAAC;gDAAG,WAAU;;kEACZ,8OAAC;kEAAG;;;;;;kEACJ,8OAAC;kEAAG;;;;;;kEACJ,8OAAC;kEAAG;;;;;;;;;;;;0DAEN,8OAAC;0DAAE;;;;;;;;;;;;;;;;;qDAOP,8OAAC;gCAAI,WAAU;;kDACb,8OAAC,oNAAA,CAAA,cAAW;wCAAC,WAAU;;;;;;kDACvB,8OAAC;wCAAE,WAAU;kDAAkC;;;;;;;;;;;;0CASnD,8OAAC;gCAAE,WAAU;0CACV,aACG,sEACA;;;;;;0CAGN,8OAAC;gCAAI,WAAU;0CACZ,2BACC;;sDACE,8OAAC,2HAAA,CAAA,SAAM;4CACL,OAAO;4CACP,SAAQ;4CACR,WAAU;sDAEV,cAAA,8OAAC,4JAAA,CAAA,UAAI;gDAAC,MAAK;0DAAI;;;;;;;;;;;sDAEjB,8OAAC,2HAAA,CAAA,SAAM;4CACL,OAAO;4CACP,WAAU;sDAEV,cAAA,8OAAC,4JAAA,CAAA,UAAI;gDAAC,MAAK;0DAAyB;;;;;;;;;;;;iEAIxC;;sDACE,8OAAC,2HAAA,CAAA,SAAM;4CACL,OAAO;4CACP,SAAQ;4CACR,WAAU;sDAEV,cAAA,8OAAC,4JAAA,CAAA,UAAI;gDAAC,MAAK;0DAAI;;;;;;;;;;;sDAEjB,8OAAC,2HAAA,CAAA,SAAM;4CACL,OAAO;4CACP,WAAU;sDAEV,cAAA,8OAAC,4JAAA,CAAA,UAAI;gDAAC,MAAK;0DAAmB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAUlD","debugId":null}}]
}